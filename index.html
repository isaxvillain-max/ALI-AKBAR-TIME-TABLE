<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tornado | Daily Protocol</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Plus+Jakarta+Sans', sans-serif;
            background: #050505;
            color: #e2e8f0;
            background-image: radial-gradient(circle at 2px 2px, #1a1a1a 1px, transparent 0);
            background-size: 40px 40px;
            overflow-x: hidden;
        }

        /* --- PRELOADER STYLES --- */
        #loader {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease-in-out;
        }

        .welcome-container {
            max-width: 600px;
            text-align: center;
            padding: 2rem;
            min-height: 200px; /* Prevents layout jump */
        }

        #typing-text {
            line-height: 1.8;
            letter-spacing: 0.05em;
            color: white;
            font-weight: 300;
        }

        .cursor {
            display: inline-block;
            width: 8px;
            height: 20px;
            background-color: #6366f1;
            margin-left: 4px;
            animation: blink 0.8s infinite;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        .loading-container {
            position: absolute;
            bottom: 10%;
            width: 200px;
        }

        /* --- DASHBOARD STYLES --- */
        .glass {
            background: rgba(20, 20, 20, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 28px;
        }
        select option { background: #1a1a1a; color: white; }
        .active-glow {
            box-shadow: 0 0 25px rgba(99, 102, 241, 0.4);
            border: 1px solid rgba(99, 102, 241, 0.6);
            transform: scale(1.01);
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-12">

    <div id="loader">
        <div class="welcome-container">
            <h2 class="text-indigo-500 font-bold mb-6 uppercase tracking-[0.3em] text-xs">Special Transmission</h2>
            <div class="text-xl md:text-2xl">
                <span id="typing-text"></span><span class="cursor"></span>
            </div>
        </div>
        
        <div class="loading-container" id="progress-box" style="display:none;">
            <div class="w-full bg-white/5 h-[2px] rounded-full overflow-hidden">
                <div id="loading-bar" class="h-full bg-indigo-500 w-0 transition-all duration-300"></div>
            </div>
            <p id="percent" class="text-center mt-2 font-mono text-indigo-400 text-sm">0%</p>
        </div>
    </div>

    <div class="max-w-6xl mx-auto">
        <div class="glass p-6 mb-8 text-center border-b-4 border-indigo-600">
            <p id="motivation" class="text-lg italic font-light text-indigo-300 tracking-wide">"Ready for greatness..."</p>
        </div>

        <div class="flex flex-col md:flex-row justify-between items-center mb-12 gap-6">
            <div class="text-center md:text-left">
                <h1 class="text-6xl font-extrabold tracking-tighter text-white uppercase">Tornado<span class="text-indigo-500">.</span></h1>
                <p class="text-gray-500 font-medium tracking-[0.3em] uppercase text-[10px] mt-2">Ali Akbar's Master Protocol</p>
            </div>
            <div id="liveClock" class="text-4xl font-bold text-indigo-400 tabular-nums bg-indigo-500/5 px-8 py-3 rounded-2xl border border-indigo-500/20 shadow-2xl">00:00:00</div>
        </div>

        <div class="grid lg:grid-cols-12 gap-8">
            <div class="lg:col-span-4 space-y-6">
                <div class="glass p-8 sticky top-8">
                    <h2 class="text-xl font-bold mb-6 flex items-center gap-2 text-white">
                        <span class="w-2 h-6 bg-indigo-500 rounded-full"></span> New Activity
                    </h2>
                    
                    <div class="space-y-4">
                        <input type="text" id="taskName" placeholder="Note (e.g. Play with squad)" class="w-full bg-white/5 border border-white/10 rounded-xl p-4 outline-none focus:border-indigo-500 text-white">
                        <div class="grid grid-cols-2 gap-4">
                            <div><label class="text-[10px] uppercase text-gray-500 ml-2 text-white">Start</label><input type="time" id="startTime" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 text-white"></div>
                            <div><label class="text-[10px] uppercase text-gray-500 ml-2 text-white">End</label><input type="time" id="endTime" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 text-white"></div>
                        </div>

                        <select id="category" class="w-full bg-white/5 border border-white/10 rounded-xl p-4 text-white outline-none focus:border-indigo-500">
                            <optgroup label="âœ¨ Spiritual Growth">
                                <option value="ğŸ•Œ Fajr Prayer">ğŸ•Œ Fajr Prayer</option>
                                <option value="ğŸ“– Quran Recitation">ğŸ“– Quran Recitation</option>
                                <option value="ğŸ•Œ Dhuhr Prayer">ğŸ•Œ Dhuhr Prayer</option>
                                <option value="ğŸ•Œ Asr Prayer">ğŸ•Œ Asr Prayer</option>
                                <option value="ğŸ•Œ Maghrib Prayer">ğŸ•Œ Maghrib Prayer</option>
                                <option value="ğŸ•Œ Isha Prayer">ğŸ•Œ Isha Prayer</option>
                            </optgroup>
                            <optgroup label="ğŸŒ… Morning">
                                <option value="ğŸŒ… Wake Up">ğŸŒ… Wake Up</option>
                                <option value="ğŸ¦· Brush Teeth">ğŸ¦· Brush Teeth</option>
                                <option value="ğŸ’¦ Wash Face">ğŸ’¦ Wash Face</option>
                                <option value="ğŸ‘• Get Dressed">ğŸ‘• Get Dressed</option>
                                <option value="ğŸ³ Breakfast">ğŸ³ Breakfast</option>
                            </optgroup>
                            <optgroup label="ğŸ« School">
                                <option value="ğŸ« Go to School">ğŸ« Go to School</option>
                                <option value="ğŸ“š Class Time">ğŸ“š Class Time</option>
                                <option value="â° Break Time">â° Break Time</option>
                                <option value="ğŸ± School Lunch">ğŸ± Lunch at School</option>
                                <option value="ğŸ  Return Home">ğŸ  Return Home</option>
                            </optgroup>
                            <optgroup label="ğŸ  Home">
                                <option value="ğŸ½ï¸ Lunch">ğŸ½ï¸ Lunch (Home)</option>
                                <option value="ğŸ˜´ Rest Time">ğŸ˜´ Rest Time</option>
                                <option value="âœï¸ Homework">âœï¸ Homework</option>
                                <option value="ğŸ“– Reading / Study">ğŸ“– Reading / Study</option>
                            </optgroup>
                            <optgroup label="âš½ Play & Fun">
                                <option value="âš½ Physical Play">âš½ Physical Play</option>
                                <option value="ğŸš¶ Outdoor Walk">ğŸš¶ Outdoor Walk</option>
                                <option value="ğŸ® Video Games">ğŸ® Video Games</option>
                                <option value="ğŸ§© Indoor Games">ğŸ§© Indoor Games</option>
                            </optgroup>
                            <optgroup label="ğŸŒ™ Night">
                                <option value="ğŸª Snack Time">ğŸª Snack Time</option>
                                <option value="ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ Family Time">ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ Family Time</option>
                                <option value="ğŸ› Dinner">ğŸ› Dinner</option>
                                <option value="ğŸ›ï¸ Bed Prep">ğŸ›ï¸ Bed Prep</option>
                                <option value="ğŸŒ™ Sleep">ğŸŒ™ Sleep</option>
                            </optgroup>
                        </select>
                        <button onclick="addTask()" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 rounded-2xl shadow-lg mt-4">Add to Timeline</button>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-8">
                <div class="flex justify-between items-center mb-6 px-2">
                    <h2 class="text-2xl font-bold text-white tracking-tight">Today's Protocol</h2>
                    <button onclick="clearAll()" class="text-xs text-gray-600 hover:text-red-500 uppercase font-bold transition-all">Reset Day</button>
                </div>
                <div id="timeline" class="space-y-4"></div>
            </div>
        </div>

        <footer class="mt-20 py-8 text-center">
            <p class="text-gray-600 text-sm tracking-widest uppercase">
                Built with â¤ï¸ by <span class="text-indigo-400 font-bold">Isa</span>
            </p>
        </footer>
    </div>

    <script>
        const message = "Hello my buddy Tornado, I hope you are doing well. I hope you have a great day ahead, and I pray you are always in a happy mood. I know you didnâ€™t expect such a detailed timetable, but please accept this as a gift to celebrate the start of our friendship.";

        function typeWriter() {
            let i = 0;
            const speed = 50; // Milliseconds per character
            const textElement = document.getElementById("typing-text");

            function type() {
                if (i < message.length) {
                    textElement.innerHTML += message.charAt(i);
                    i++;
                    setTimeout(type, speed);
                } else {
                    // Show progress bar after typing is done
                    document.getElementById('progress-box').style.display = 'block';
                    startLoading();
                }
            }
            type();
        }

        function startLoading() {
            let width = 0;
            const bar = document.getElementById('loading-bar');
            const percent = document.getElementById('percent');
            
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        document.getElementById('loader').style.opacity = '0';
                        setTimeout(() => document.getElementById('loader').style.display = 'none', 1000);
                    }, 800);
                } else {
                    width++;
                    bar.style.width = width + '%';
                    percent.innerText = width + '%';
                }
            }, 25);
        }

        const quotes = [
            "Tornado, greatness is a choice, not a chance.", 
            "Ali Akbar, the grind never sleeps.", 
            "Discipline equals freedom.",
            "Stay hungry for success, Tornado."
        ];

        let tasks = JSON.parse(localStorage.getItem('tornado_v4_clean')) || [];

        function updateClock() {
            const now = new Date();
            const timeStr = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
            document.getElementById('liveClock').innerText = now.toLocaleTimeString('en-GB');
            document.querySelectorAll('.task-card').forEach(card => {
                if (timeStr >= card.dataset.start && timeStr <= card.dataset.end) {
                    card.classList.add('active-glow');
                } else {
                    card.classList.remove('active-glow');
                }
            });
        }

        function renderTasks() {
            const timeline = document.getElementById('timeline');
            timeline.innerHTML = '';
            tasks.sort((a, b) => a.start.localeCompare(b.start));
            if(tasks.length === 0) {
                timeline.innerHTML = `<div class="glass p-20 text-center text-gray-600 border-dashed border-2 border-white/5">Protocol empty. Start the grind, Tornado.</div>`;
                return;
            }
            tasks.forEach((t, i) => {
                const div = document.createElement('div');
                div.className = "glass p-6 flex justify-between items-center task-card group";
                div.dataset.start = t.start; div.dataset.end = t.end;
                div.innerHTML = `
                    <div class="flex items-center gap-5">
                        <div class="text-2xl bg-indigo-500/10 h-14 w-14 rounded-2xl flex items-center justify-center border border-indigo-500/20">${t.cat.split(' ')[0]}</div>
                        <div>
                            <span class="text-[10px] text-indigo-400 font-bold uppercase tracking-widest">${t.cat.split(' ').slice(1).join(' ')}</span>
                            <h3 class="text-xl font-bold text-white">${t.name || 'Set Task'}</h3>
                        </div>
                    </div>
                    <div class="flex items-center gap-6">
                        <div class="text-right"><p class="text-white font-mono text-lg font-bold">${t.start} â€” ${t.end}</p></div>
                        <button onclick="deleteTask(${i})" class="text-gray-600 opacity-0 group-hover:opacity-100 hover:text-red-500 transition-all">âœ•</button>
                    </div>`;
                timeline.appendChild(div);
            });
        }

        function addTask() {
            const name = document.getElementById('taskName').value;
            const start = document.getElementById('startTime').value;
            const end = document.getElementById('endTime').value;
            const cat = document.getElementById('category').value;
            if(!start || !end) return;
            tasks.push({ name, start, end, cat });
            localStorage.setItem('tornado_v4_clean', JSON.stringify(tasks));
            document.getElementById('taskName').value = '';
            renderTasks();
        }

        function deleteTask(i) {
            tasks.splice(i, 1);
            localStorage.setItem('tornado_v4_clean', JSON.stringify(tasks));
            renderTasks();
        }

        function clearAll() { if(confirm("Clear today's schedule?")) { tasks = []; localStorage.removeItem('tornado_v4_clean'); renderTasks(); } }

        window.onload = () => {
            typeWriter(); // Start typing first
            renderTasks();
            setInterval(updateClock, 1000);
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('motivation').innerText = `"${randomQuote}"`;
        };
    </script>
</body>
</html>
